TaskCoach on Debian Bookworm - Quick Start
===========================================

This is a simplified guide to get TaskCoach running on Debian 12 Bookworm.

IMPORTANT: PEP 668 on Bookworm
-------------------------------

Debian Bookworm protects system Python from accidental breakage (PEP 668).
This means `pip install --user` will give an error. This is GOOD!

Solution: We use system packages + a virtual environment (venv).


OPTION 1: Automated Setup (Recommended)
----------------------------------------

1. Run the setup script:

   ./setup_bookworm.sh

2. That's it! The script will:
   - Install system packages (wxPython, numpy, lxml, twisted, etc.)
   - Create a virtual environment at ~/.taskcoach-venv
   - Install remaining packages (desktop3, lockfile, gntp, distro, pypubsub)
   - Generate required resources (icons, templates)
   - Create a launch script (taskcoach-run.sh)
   - Test the installation

3. Start TaskCoach:

   ./taskcoach-run.sh


OPTION 2: Manual Setup
-----------------------

1. Install system packages:

   sudo apt-get update
   sudo apt-get install -y python3-wxgtk4.0 python3-six python3-twisted \
       python3-lxml python3-numpy python3-dateutil python3-chardet \
       python3-keyring python3-pyparsing python3-pyxdg python3-venv xvfb

2. Create virtual environment:

   python3 -m venv ~/.taskcoach-venv
   source ~/.taskcoach-venv/bin/activate
   pip install desktop3 lockfile gntp distro pypubsub
   deactivate

3. Generate resources:

   xvfb-run -a python3 icons.in/make.py
   xvfb-run -a python3 templates.in/make.py

4. Create launch script:

   cat > taskcoach-run.sh << 'EOF'
   #!/bin/bash
   source ~/.taskcoach-venv/bin/activate
   cd "$(dirname "$0")"
   python3 taskcoach.py "$@"
   EOF
   chmod +x taskcoach-run.sh

5. Run TaskCoach:

   ./taskcoach-run.sh


Testing Your Installation
--------------------------

Run the test suite:

   ./test_taskcoach.sh

This will verify:
- Python version compatibility
- System packages installed correctly
- Virtual environment packages working
- Resources generated correctly
- Application can start


Common Usage
------------

# Start with GUI:
./taskcoach-run.sh

# Open a specific file:
./taskcoach-run.sh mytasks.tsk

# Use custom settings file:
./taskcoach-run.sh --ini=/path/to/settings.ini

# Use different language (e.g., French):
./taskcoach-run.sh --language=fr

# Show all options:
./taskcoach-run.sh --help


Running Headless (SSH/No Display)
----------------------------------

If you're connected via SSH or have no display:

   xvfb-run -a ./taskcoach-run.sh

Xvfb (X Virtual Framebuffer) provides a virtual display.


Understanding the Setup
-----------------------

TaskCoach uses TWO sources for Python packages:

FROM DEBIAN REPOS (system packages):
  âœ… python3-wxgtk4.0 - GUI framework
  âœ… python3-twisted - Networking
  âœ… python3-lxml - XML processing
  âœ… python3-numpy - Numerical arrays
  âœ… python3-six - Python 2/3 compatibility
  âœ… python3-dateutil - Date handling
  âœ… python3-chardet - Character encoding detection
  âœ… python3-keyring - Keyring access
  âœ… python3-pyparsing - Parsing library
  âœ… python3-pyxdg - XDG standards

FROM PYPI (in virtual environment):
  ðŸ“¦ desktop3 - Desktop integration
  ðŸ“¦ lockfile - File locking
  ðŸ“¦ gntp - Growl notifications
  ðŸ“¦ distro - Linux distribution detection
  ðŸ“¦ pypubsub - Publish-subscribe messaging

This approach:
  â€¢ Uses stable Debian packages where possible
  â€¢ Isolates PyPI packages in a safe venv
  â€¢ Prevents breaking system Python
  â€¢ Is the recommended best practice


Troubleshooting
---------------

Error: "error: externally-managed-environment"
â†’ This is PEP 668 protection. Use the setup script or create a venv.

Error: "No module named 'wx'"
â†’ Install: sudo apt-get install python3-wxgtk4.0

Error: "couldn't import icons.py"
â†’ Run: xvfb-run -a python3 icons.in/make.py

Error: "No module named 'taskcoachlib.persistence.xml.templates'"
â†’ Run: xvfb-run -a python3 templates.in/make.py

Error: "Unable to access the X Display"
â†’ Use: xvfb-run -a ./taskcoach-run.sh

Error: "Virtual environment not found"
â†’ Run: ./setup_bookworm.sh


System Requirements
-------------------

- Debian 12 (Bookworm)
- Python 3.11+ (included in Bookworm)
- ~100 MB disk space (with venv)
- 256 MB RAM minimum


What's Tested and Working
--------------------------

âœ“ Python 3.11 compatibility
âœ“ wxPython 4.2.0 integration
âœ“ All core dependencies
âœ“ GUI startup and rendering
âœ“ Task creation and management
âœ“ File loading and saving
âœ“ Import/Export functionality
âœ“ PEP 668 compliance (using venv)


Getting Help
------------

- Full setup guide: DEBIAN_BOOKWORM_SETUP.md
- README: README.md
- GitHub: https://github.com/taskcoach/taskcoach
- Website: http://www.taskcoach.org


Quick Example
-------------

After setup, try this:

   # Start TaskCoach
   ./taskcoach-run.sh

   # In the GUI:
   1. File â†’ New to create a new task file
   2. Task â†’ New Task to add your first task
   3. Enter a task description
   4. File â†’ Save As to save your tasks

   # Or from command line with existing file:
   ./taskcoach-run.sh example.tsk


Why Virtual Environment?
-------------------------

Debian Bookworm implements PEP 668 to prevent:
  Ã— Breaking system Python packages
  Ã— Conflicting with system tools
  Ã— Accidental package downgrades
  Ã— Security vulnerabilities

Using a venv is:
  âœ“ Safe and isolated
  âœ“ Easy to remove (just delete ~/.taskcoach-venv)
  âœ“ Standard Python best practice
  âœ“ What Debian recommends

The taskcoach-run.sh script automatically activates the venv,
so you don't have to think about it!


Version Info
------------

TaskCoach: 1.5.0
Tested on: Debian 12 (Bookworm)
Python: 3.11.2+
wxPython: 4.2.0+
Last Updated: 2025-11-15 (Updated for PEP 668)
