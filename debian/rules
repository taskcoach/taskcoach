#!/usr/bin/make -f

export PYBUILD_NAME=taskcoach

%:
	dh $@ --with python3 --buildsystem=pybuild

# Skip tests during build - they require wxPython and a display
override_dh_auto_test:

override_dh_auto_install:
	dh_auto_install
	# Install desktop file for application menu
	install -D -m 644 build.in/linux_common/taskcoach.desktop \
		debian/taskcoach/usr/share/applications/taskcoach.desktop
	# Install appdata/metainfo for software centers
	install -D -m 644 build.in/debian/taskcoach.appdata.xml \
		debian/taskcoach/usr/share/metainfo/taskcoach.appdata.xml
	# Install application icon
	install -D -m 644 icons.in/taskcoach.png \
		debian/taskcoach/usr/share/pixmaps/taskcoach.png
	# Install Welcome.tsk example file for first-run experience
	install -D -m 644 Welcome.tsk \
		debian/taskcoach/usr/share/taskcoach/Welcome.tsk
	# Note: The wxPython hypertreelist patch is now bundled inside taskcoachlib/patches/
	# and installed automatically by pybuild. No manual installation needed.
